/**
This notice must be untouched at all times.
This is the COMPRESSED version of Draw2D
WebSite: http://www.draw2d.org
Copyright: 2006 Andreas Herz. All rights reserved.
Created: 5.11.2006 by Andreas Herz (Web: http://www.freegroup.de )
LICENSE: LGPL
**/

draw2d.ManhattanConnectionRouter=function(){this.MINDIST=20;};draw2d.ManhattanConnectionRouter.prototype=new draw2d.ConnectionRouter;draw2d.ManhattanConnectionRouter.prototype.type="draw2d.ManhattanConnectionRouter";draw2d.ManhattanConnectionRouter.prototype.route=function(conn){var _29de=conn.getStartPoint();var _29df=this.getStartDirection(conn);var toPt=conn.getEndPoint();var toDir=this.getEndDirection(conn);this._route(conn,toPt,toDir,_29de,_29df);};draw2d.ManhattanConnectionRouter.prototype._route=function(conn,_29e3,_29e4,toPt,toDir){var TOL=0.1;var _29e8=0.01;var UP=0;var RIGHT=1;var DOWN=2;var LEFT=3;var xDiff=_29e3.x-toPt.x;var yDiff=_29e3.y-toPt.y;var point;var dir;if(((xDiff*xDiff)<(_29e8))&&((yDiff*yDiff)<(_29e8))){conn.addPoint(new draw2d.Point(toPt.x,toPt.y));return;}if(_29e4==LEFT){if((xDiff>0)&&((yDiff*yDiff)<TOL)&&(toDir==RIGHT)){point=toPt;dir=toDir;}else{if(xDiff<0){point=new draw2d.Point(_29e3.x-this.MINDIST,_29e3.y);}else{if(((yDiff>0)&&(toDir==DOWN))||((yDiff<0)&&(toDir==UP))){point=new draw2d.Point(toPt.x,_29e3.y);}else{if(_29e4==toDir){var pos=Math.min(_29e3.x,toPt.x)-this.MINDIST;point=new draw2d.Point(pos,_29e3.y);}else{point=new draw2d.Point(_29e3.x-(xDiff/2),_29e3.y);}}}if(yDiff>0){dir=UP;}else{dir=DOWN;}}}else{if(_29e4==RIGHT){if((xDiff<0)&&((yDiff*yDiff)<TOL)&&(toDir==LEFT)){point=toPt;dir=toDir;}else{if(xDiff>0){point=new draw2d.Point(_29e3.x+this.MINDIST,_29e3.y);}else{if(((yDiff>0)&&(toDir==DOWN))||((yDiff<0)&&(toDir==UP))){point=new draw2d.Point(toPt.x,_29e3.y);}else{if(_29e4==toDir){var pos=Math.max(_29e3.x,toPt.x)+this.MINDIST;point=new draw2d.Point(pos,_29e3.y);}else{point=new draw2d.Point(_29e3.x-(xDiff/2),_29e3.y);}}}if(yDiff>0){dir=UP;}else{dir=DOWN;}}}else{if(_29e4==DOWN){if(((xDiff*xDiff)<TOL)&&(yDiff<0)&&(toDir==UP)){point=toPt;dir=toDir;}else{if(yDiff>0){point=new draw2d.Point(_29e3.x,_29e3.y+this.MINDIST);}else{if(((xDiff>0)&&(toDir==RIGHT))||((xDiff<0)&&(toDir==LEFT))){point=new draw2d.Point(_29e3.x,toPt.y);}else{if(_29e4==toDir){var pos=Math.max(_29e3.y,toPt.y)+this.MINDIST;point=new draw2d.Point(_29e3.x,pos);}else{point=new draw2d.Point(_29e3.x,_29e3.y-(yDiff/2));}}}if(xDiff>0){dir=LEFT;}else{dir=RIGHT;}}}else{if(_29e4==UP){if(((xDiff*xDiff)<TOL)&&(yDiff>0)&&(toDir==DOWN)){point=toPt;dir=toDir;}else{if(yDiff<0){point=new draw2d.Point(_29e3.x,_29e3.y-this.MINDIST);}else{if(((xDiff>0)&&(toDir==RIGHT))||((xDiff<0)&&(toDir==LEFT))){point=new draw2d.Point(_29e3.x,toPt.y);}else{if(_29e4==toDir){var pos=Math.min(_29e3.y,toPt.y)-this.MINDIST;point=new draw2d.Point(_29e3.x,pos);}else{point=new draw2d.Point(_29e3.x,_29e3.y-(yDiff/2));}}}if(xDiff>0){dir=LEFT;}else{dir=RIGHT;}}}}}}this._route(conn,point,dir,toPt,toDir);conn.addPoint(_29e3);};