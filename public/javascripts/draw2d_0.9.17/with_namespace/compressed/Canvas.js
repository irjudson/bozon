/**
This notice must be untouched at all times.
This is the COMPRESSED version of Draw2D
WebSite: http://www.draw2d.org
Copyright: 2006 Andreas Herz. All rights reserved.
Created: 5.11.2006 by Andreas Herz (Web: http://www.freegroup.de )
LICENSE: LGPL
**/

draw2d.Canvas=function(_29c4){if(_29c4){this.construct(_29c4);}this.enableSmoothFigureHandling=false;this.canvasLines=new draw2d.ArrayList();};draw2d.Canvas.prototype.type="draw2d.Canvas";draw2d.Canvas.prototype.construct=function(_29c5){this.canvasId=_29c5;this.html=document.getElementById(this.canvasId);this.scrollArea=document.body.parentNode;};draw2d.Canvas.prototype.setViewPort=function(divId){this.scrollArea=document.getElementById(divId);};draw2d.Canvas.prototype.addFigure=function(_29c7,xPos,yPos,_29ca){if(this.enableSmoothFigureHandling==true){if(_29c7.timer<=0){_29c7.setAlpha(0.001);}var _29cb=_29c7;var _29cc=function(){if(_29cb.alpha<1){_29cb.setAlpha(Math.min(1,_29cb.alpha+0.05));}else{window.clearInterval(_29cb.timer);_29cb.timer=-1;}};if(_29cb.timer>0){window.clearInterval(_29cb.timer);}_29cb.timer=window.setInterval(_29cc,30);}_29c7.setCanvas(this);if(xPos&&yPos){_29c7.setPosition(xPos,yPos);}if(_29c7 instanceof draw2d.Line){this.canvasLines.add(_29c7);this.html.appendChild(_29c7.getHTMLElement());}else{var obj=this.canvasLines.getFirstElement();if(obj==null){this.html.appendChild(_29c7.getHTMLElement());}else{this.html.insertBefore(_29c7.getHTMLElement(),obj.getHTMLElement());}}if(!_29ca){_29c7.paint();}};draw2d.Canvas.prototype.removeFigure=function(_29ce){if(this.enableSmoothFigureHandling==true){var oThis=this;var _29d0=_29ce;var _29d1=function(){if(_29d0.alpha>0){_29d0.setAlpha(Math.max(0,_29d0.alpha-0.05));}else{window.clearInterval(_29d0.timer);_29d0.timer=-1;oThis.html.removeChild(_29d0.html);_29d0.setCanvas(null);}};if(_29d0.timer>0){window.clearInterval(_29d0.timer);}_29d0.timer=window.setInterval(_29d1,20);}else{this.html.removeChild(_29ce.html);_29ce.setCanvas(null);}if(_29ce instanceof draw2d.Line){this.canvasLines.remove(_29ce);}};draw2d.Canvas.prototype.getEnableSmoothFigureHandling=function(){return this.enableSmoothFigureHandling;};draw2d.Canvas.prototype.setEnableSmoothFigureHandling=function(flag){this.enableSmoothFigureHandling=flag;};draw2d.Canvas.prototype.getWidth=function(){return parseInt(this.html.style.width);};draw2d.Canvas.prototype.getHeight=function(){return parseInt(this.html.style.height);};draw2d.Canvas.prototype.setBackgroundImage=function(_29d3,_29d4){if(_29d3!=null){if(_29d4){this.html.style.background="transparent url("+_29d3+") ";}else{this.html.style.background="transparent url("+_29d3+") no-repeat";}}else{this.html.style.background="transparent";}};draw2d.Canvas.prototype.getY=function(){return this.y;};draw2d.Canvas.prototype.getX=function(){return this.x;};draw2d.Canvas.prototype.getAbsoluteY=function(){var el=this.html;var ot=el.offsetTop;while((el=el.offsetParent)!=null){ot+=el.offsetTop;}return ot;};draw2d.Canvas.prototype.getAbsoluteX=function(){var el=this.html;var ol=el.offsetLeft;while((el=el.offsetParent)!=null){ol+=el.offsetLeft;}return ol;};draw2d.Canvas.prototype.getScrollLeft=function(){return this.scrollArea.scrollLeft;};draw2d.Canvas.prototype.getScrollTop=function(){return this.scrollArea.scrollTop;};