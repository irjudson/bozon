/**
This notice must be untouched at all times.
This is the COMPRESSED version of Draw2D
WebSite: http://www.draw2d.org
Copyright: 2006 Andreas Herz. All rights reserved.
Created: 5.11.2006 by Andreas Herz (Web: http://www.freegroup.de )
LICENSE: LGPL
**/

CommandStack=function(){this.undostack=new Array();this.redostack=new Array();this.maxundo=50;this.eventListeners=new ArrayList();};CommandStack.PRE_EXECUTE=1;CommandStack.PRE_REDO=2;CommandStack.PRE_UNDO=4;CommandStack.POST_EXECUTE=8;CommandStack.POST_REDO=16;CommandStack.POST_UNDO=32;CommandStack.POST_MASK=CommandStack.POST_EXECUTE|CommandStack.POST_UNDO|CommandStack.POST_REDO;CommandStack.PRE_MASK=CommandStack.PRE_EXECUTE|CommandStack.PRE_UNDO|CommandStack.PRE_REDO;CommandStack.prototype.type="CommandStack";CommandStack.prototype.setUndoLimit=function(count){this.maxundo=count;};CommandStack.prototype.markSaveLocation=function(){this.undostack=new Array();this.redostack=new Array();};CommandStack.prototype.execute=function(_149e){if(_149e==null){return;}if(_149e.canExecute()==false){return;}this.notifyListeners(_149e,CommandStack.PRE_EXECUTE);this.undostack.push(_149e);_149e.execute();this.redostack=new Array();if(this.undostack.length>this.maxundo){this.undostack=this.undostack.slice(this.undostack.length-this.maxundo);}this.notifyListeners(_149e,CommandStack.POST_EXECUTE);};CommandStack.prototype.undo=function(){var _149f=this.undostack.pop();if(_149f){this.notifyListeners(_149f,CommandStack.PRE_UNDO);this.redostack.push(_149f);_149f.undo();this.notifyListeners(_149f,CommandStack.POST_UNDO);}};CommandStack.prototype.redo=function(){var _14a0=this.redostack.pop();if(_14a0){this.notifyListeners(_14a0,CommandStack.PRE_REDO);this.undostack.push(_14a0);_14a0.redo();this.notifyListeners(_14a0,CommandStack.POST_REDO);}};CommandStack.prototype.canRedo=function(){return this.redostack.length>0;};CommandStack.prototype.canUndo=function(){return this.undostack.length>0;};CommandStack.prototype.addCommandStackEventListener=function(_14a1){this.eventListeners.add(_14a1);};CommandStack.prototype.removeCommandStackEventListener=function(_14a2){this.eventListeners.remove(_14a2);};CommandStack.prototype.notifyListeners=function(_14a3,state){var event=new CommandStackEvent(_14a3,state);var size=this.eventListeners.getSize();for(var i=0;i<size;i++){this.eventListeners.get(i).stackChanged(event);}};